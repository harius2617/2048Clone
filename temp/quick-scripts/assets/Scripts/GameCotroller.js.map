{"version":3,"sources":["GameCotroller.js"],"names":["Emitter","require","cc","Class","extends","Component","properties","soundOnBtn","Button","soundOffBtn","userNameBox","EditBox","tooltipName","Label","enterButton","ruleLayout","PageView","loseLayout","Node","newHigh","leaderboard","winLayout","topUser","Prefab","content","soundOn","soundOff","soundBg","AudioSource","soundWin","onLoad","instance","node","active","enterBtn","interacterble","scale","play","registerEvent","loseGame","bind","winGame","notiNewHighScore","soundOnFunc","soundOffFunc","stop","onRule","getComponent","scrollToPage","emit","offRule","score","tween","to","start","call","continueGame","opacity","userNameCheck","name","string","length","userInput","instantiate","addChild","onLeaderboard","offLeaderboard"],"mappings":"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","file":"GameCotroller.js","sourceRoot":"..\\..\\..\\..\\assets\\Scripts","sourcesContent":["const Emitter = require('mEmitter');\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        soundOnBtn: cc.Button,\r\n        soundOffBtn: cc.Button,\r\n        userNameBox: cc.EditBox,\r\n        tooltipName: cc.Label,\r\n        enterButton: cc.Button,\r\n        ruleLayout: cc.PageView,\r\n        loseLayout: cc.Node,\r\n        newHigh: cc.Node,\r\n        leaderboard: cc.Node,\r\n        winLayout: cc.Node,\r\n        topUser: cc.Prefab,\r\n        content: cc.Node,\r\n        soundOn: true,\r\n        soundOff: false,\r\n        soundBg: cc.AudioSource,\r\n        soundWin: cc.AudioSource,\r\n    },\r\n\r\n    onLoad () {\r\n        Emitter.instance = new Emitter();\r\n        this.soundOnBtn.node.active = true;\r\n        this.soundOffBtn.node.active = false;\r\n        this.ruleLayout.node.active = false;\r\n        this.tooltipName.node.active = false;\r\n        this.enterBtn.interacterble = false;\r\n        this.winLayout.scale = 0;\r\n        this.winLayout.active = false;\r\n        this.loseLayout.scale = 0;\r\n        this.loseLayout.active = false;\r\n        this.newHigh.active = false;\r\n        this.newHigh.scale = 1;\r\n        this.soundBg.play(this.soundBg, true,1);\r\n        Emitter.instance.registerEvent(\"LOSE\", this.loseGame.bind(this));\r\n        Emitter.instance.registerEvent(\"WIN\", this.winGame.bind(this));\r\n        Emitter.instance.registerEvent(\"HIGHSCORE\", this.notiNewHighScore.bind(this));\r\n        Emitter.instance.registerEvent(\"SOUND\", this.soundOnFunc.bind(this));\r\n    },\r\n\r\n    soundOnFunc() {\r\n        this.soundOnBtn.node.active = true;\r\n        this.soundOffBtn.active = false;\r\n        this.soundBg.play(this.soundBg, false,1)\r\n    },\r\n    \r\n    soundOffFunc() {\r\n        this.soundOnBtn.node.active = false;\r\n        this.soundOffBtn.node.active = true;\r\n        this.soundBg.stop(this.soundBg, true,1)\r\n    },\r\n\r\n    onRule () {\r\n        this.ruleLayout.node.active = true;\r\n        this.leaderboard.active = false;\r\n        this.ruleLayout.node.getComponent(cc.PageView).scrollToPage(0, 0.01);\r\n        Emitter.instance.emit(\"STOPMOVE\");\r\n    },\r\n\r\n    offRule() {\r\n        this.ruleLayout.node.active = false;\r\n        Emitter.instance.emit(\"CONTINUE\")\r\n    },\r\n\r\n    loseGame(score) {\r\n        this.loseLayout.active = true;\r\n        cc.tween(this.loseLayout)\r\n            .to(1, {scale: 1})\r\n            .start()\r\n    },\r\n\r\n    winGame() {\r\n        if(this.soundOnBtn.node.active === true){\r\n            this.soundWin.play(this.soundWin, false, 1)\r\n        }\r\n        cc.tween(this.winLayout)\r\n            .call(()=> {\r\n                this.winLayout.active = true;\r\n            })\r\n            .to(1, {scale: 1})\r\n            .start()\r\n    },\r\n\r\n    continueGame() {\r\n        this.winLayout.active = false;\r\n        Emitter.instance.emit(\"CONTINUE\")\r\n    },\r\n\r\n    notiNewHighScore (){\r\n        this.newHigh.active = true;\r\n        cc.tween(this.newHigh)\r\n            .to(0,1, {scale: 1})\r\n            .to(1, {opacity: 50})\r\n            .to(1, {opacity: 255})\r\n            .to(1, {scale: 0})\r\n            .start()\r\n    },\r\n\r\n    userNameCheck() {\r\n        const name = this.userNameBox.string;\r\n        if(name.length === 0) {\r\n            this.tooltipName.node.active = true;\r\n            this.tooltipName.string = \"Username must have at least 1 letters\";\r\n        }else {\r\n            this.tooltipName.node.active = false;\r\n        }\r\n        return true;\r\n    },\r\n\r\n    enterBtn() {\r\n        if(this.userNameCheck) {\r\n            this.enterButton.interacterble = true;\r\n            let userInput = cc.instantiate(this.topUser);\r\n            this.content.addChild(userInput)\r\n            userInput.getComponent(cc.Label).string = this.userNameBox.getComponent(cc.EditBox).string + \" :((\";\r\n        }\r\n        this.loseLayout.active = false;\r\n    },\r\n\r\n    onLeaderboard () {\r\n        this.ruleLayout.node.active = false\r\n        this.leaderboard.active = true;\r\n        Emitter.instance.emit(\"STOPMOVE\");\r\n    },\r\n\r\n    offLeaderboard() {\r\n        this.leaderboard.active = false;\r\n        Emitter.instance.emit(\"CONTINUE\")\r\n    },\r\n});\r\n"]}