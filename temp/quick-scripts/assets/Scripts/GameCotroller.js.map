{"version":3,"sources":["GameCotroller.js"],"names":["Emitter","require","cc","Class","extends","Component","properties","soundOnBtn","Button","soundOffBtn","userNameBox","EditBox","tooltipName","Label","enterButton","ruleLayout","PageView","loseLayout","Node","newHigh","leaderboard","topUser","Prefab","content","soundOn","soundOff","soundBg","AudioSource","onLoad","instance","node","active","scale","enterBtn","interacterble","play","registerEvent","loseGame","bind","notiNewHighScore","soundOnFunc","soundOffFunc","stop","onRule","getComponent","scrollToPage","offRule","score","tween","to","start","opacity","userNameCheck","name","string","length","userInput","instantiate","addChild","onLeaderboard","offLeaderboard"],"mappings":"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","file":"GameCotroller.js","sourceRoot":"../../../../assets/Scripts","sourcesContent":["const Emitter = require('mEmitter');\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        soundOnBtn: cc.Button,\n        soundOffBtn: cc.Button,\n        userNameBox: cc.EditBox,\n        tooltipName: cc.Label,\n        enterButton: cc.Button,\n        ruleLayout: cc.PageView,\n        loseLayout: cc.Node,\n        newHigh: cc.Node,\n        leaderboard: cc.Node,\n        // winLayout: cc.Node,\n        topUser: cc.Prefab,\n        content: cc.Node,\n        soundOn: true,\n        soundOff: false,\n        soundBg: cc.AudioSource,\n    },\n\n    onLoad () {\n        Emitter.instance = new Emitter();\n        this.soundOnBtn.node.active = true;\n        this.soundOffBtn.node.active = false;\n        this.ruleLayout.node.active = false;\n        this.loseLayout.scale = 1;\n        this.tooltipName.node.active = false;\n        this.enterBtn.interacterble = false;\n        // this.winLayout.scale = 0;\n        // this.winLayout.active = false;\n        this.loseLayout.active = false;\n        // this.newHigh.active = false;\n        this.newHigh.scale = 0;\n        this.soundBg.play(this.soundBg, true,1);\n        Emitter.instance.registerEvent(\"LOSE\", this.loseGame.bind(this));\n        // Emitter.instance.registerEvent(\"HIGHSCORE\", this.notiNewHighScore.bind(this));\n        this.notiNewHighScore()\n    },\n    soundOnFunc() {\n        this.soundOnBtn.node.active = true;\n        this.soundOffBtn.active = false;\n        this.soundBg.play(this.soundBg, true,1)\n    },\n\n    soundOffFunc() {\n        this.soundOnBtn.node.active = false;\n        this.soundOffBtn.node.active = true;\n        this.soundBg.stop(this.soundBg, true,1)\n    },\n\n    onRule () {\n        this.ruleLayout.node.active = true;\n        this.ruleLayout.node.getComponent(cc.PageView).scrollToPage(0, 0.01);\n    },\n\n    offRule() {\n        this.ruleLayout.node.active = false;\n    },\n\n    loseGame(score) {\n        this.loseLayout.active = true;\n        cc.tween(this.loseLayout)\n            .to(1, {scale: 1})\n            .start()\n    },\n\n    notiNewHighScore (){\n        this.newHigh.active = true;\n        cc.tween(this.newHigh)\n            .to(0,1, {scale: 1})\n            .to(1, {opacity: 50})\n            .to(1, {opacity: 255})\n            .to(1, {scale: 0})\n            .start()\n    },\n\n    userNameCheck() {\n        const name = this.userNameBox.string;\n        if(name.length === 0) {\n            this.tooltipName.node.active = true;\n            this.tooltipName.string = \"Username must have at least 1 letters\";\n        }else {\n            this.tooltipName.node.active = false;\n        }\n        return true;\n    },\n\n    enterBtn() {\n        if(this.userNameCheck) {\n            this.enterButton.interacterble = true;\n            let userInput = cc.instantiate(this.topUser);\n            this.content.addChild(userInput)\n            userInput.getComponent(cc.Label).string = this.userNameBox.getComponent(cc.EditBox).string + \" :((\";\n        }\n        this.loseLayout.active = false;\n    },\n\n    onLeaderboard () {\n        this.leaderboard.active = true;\n    },\n\n    offLeaderboard() {\n        this.leaderboard.active = false;\n    },\n});\n"]}