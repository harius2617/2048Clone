{"version":3,"sources":["GameCotroller.js"],"names":["Emitter","require","cc","Class","extends","Component","properties","soundOnBtn","Button","soundOffBtn","userNameBox","EditBox","tooltipName","Label","enterButton","ruleLayout","PageView","loseLayout","Node","newHigh","leaderboard","winLayout","topUser","Prefab","content","soundOn","soundOff","soundBg","AudioSource","soundWin","onLoad","instance","node","active","enterBtn","interacterble","scale","play","registerEvent","loseGame","bind","winGame","warn","notiNewHighScore","soundOnFunc","soundOffFunc","stop","onRule","getComponent","scrollToPage","offRule","score","tween","to","start","continueGame","emit","opacity","userNameCheck","name","string","length","userInput","instantiate","addChild","onLeaderboard","offLeaderboard"],"mappings":"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","file":"GameCotroller.js","sourceRoot":"../../../../assets/Scripts","sourcesContent":["const Emitter = require('mEmitter');\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        soundOnBtn: cc.Button,\n        soundOffBtn: cc.Button,\n        userNameBox: cc.EditBox,\n        tooltipName: cc.Label,\n        enterButton: cc.Button,\n        ruleLayout: cc.PageView,\n        loseLayout: cc.Node,\n        newHigh: cc.Node,\n        leaderboard: cc.Node,\n        winLayout: cc.Node,\n        topUser: cc.Prefab,\n        content: cc.Node,\n        soundOn: true,\n        soundOff: false,\n        soundBg: cc.AudioSource,\n        soundWin: cc.AudioSource,\n    },\n\n    onLoad () {\n        Emitter.instance = new Emitter();\n        this.soundOnBtn.node.active = true;\n        this.soundOffBtn.node.active = false;\n        this.ruleLayout.node.active = false;\n        this.tooltipName.node.active = false;\n        this.enterBtn.interacterble = false;\n        this.winLayout.scale = 0;\n        this.winLayout.active = false;\n        this.loseLayout.scale = 0;\n        this.loseLayout.active = false;\n        this.newHigh.active = false;\n        this.newHigh.scale = 1;\n        this.soundBg.play(this.soundBg, true,1);\n        Emitter.instance.registerEvent(\"LOSE\", this.loseGame.bind(this));\n        Emitter.instance.registerEvent(\"WIN\", this.winGame.bind(this));\n        cc.warn(this.winLayout.scale)\n        Emitter.instance.registerEvent(\"HIGHSCORE\", this.notiNewHighScore.bind(this));\n    },\n    soundOnFunc() {\n        this.soundOnBtn.node.active = true;\n        this.soundOffBtn.active = false;\n        this.soundBg.play(this.soundBg, true,1)\n    },\n\n    soundOffFunc() {\n        this.soundOnBtn.node.active = false;\n        this.soundOffBtn.node.active = true;\n        this.soundBg.stop(this.soundBg, true,1)\n    },\n\n    onRule () {\n        this.ruleLayout.node.active = true;\n        this.ruleLayout.node.getComponent(cc.PageView).scrollToPage(0, 0.01);\n    },\n\n    offRule() {\n        this.ruleLayout.node.active = false;\n    },\n\n    loseGame(score) {\n        this.loseLayout.active = true;\n        cc.tween(this.loseLayout)\n            .to(1, {scale: 1})\n            .start()\n    },\n\n    winGame() {\n        // cc.log(this.winLayout)\n        this.soundWin.play(this.soundWin, false, 1)\n        this.winLayout.active = true;\n        cc.tween(this.winLayout)\n            .to(1, {scale: 1})\n            .start()\n    },\n\n    continueGame() {\n        this.winLayout.active = false;\n        Emitter.instance.emit(\"CONTINUE\")\n    },\n\n    notiNewHighScore (){\n        this.newHigh.active = true;\n        cc.tween(this.newHigh)\n            .to(0,1, {scale: 1})\n            .to(1, {opacity: 50})\n            .to(1, {opacity: 255})\n            .to(1, {scale: 0})\n            .start()\n    },\n\n    userNameCheck() {\n        const name = this.userNameBox.string;\n        if(name.length === 0) {\n            this.tooltipName.node.active = true;\n            this.tooltipName.string = \"Username must have at least 1 letters\";\n        }else {\n            this.tooltipName.node.active = false;\n        }\n        return true;\n    },\n\n    enterBtn() {\n        if(this.userNameCheck) {\n            this.enterButton.interacterble = true;\n            let userInput = cc.instantiate(this.topUser);\n            this.content.addChild(userInput)\n            userInput.getComponent(cc.Label).string = this.userNameBox.getComponent(cc.EditBox).string + \" :((\";\n        }\n        this.loseLayout.active = false;\n    },\n\n    onLeaderboard () {\n        this.leaderboard.active = true;\n    },\n\n    offLeaderboard() {\n        this.leaderboard.active = false;\n    },\n});\n"]}